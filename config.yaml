mode: PAPER
timeframe: 1Hour
purpose: capital
shorts_only: false
longs_only: false
broker:
  paper_endpoint: https://paper-api.alpaca.markets
  live_endpoint: https://api.alpaca.markets
trading:
  watchlist_file: universe.yaml
  lookback_period: 200
  warmup_bars: 200
risk_management:
  max_position_size_pct: 15
  max_portfolio_risk_pct: 30.0
  stop_loss_pct: 5.0
  take_profit_pct: 5.0
  max_daily_loss_pct: 4.0
  emergency_stop_pct: 8.0
  max_open_positions: 3
  max_position_dollars: 999999  # Disabled - use percentage-based sizing only (scales with portfolio)
daily_drawdown_guard:
  enabled: true
  warning_pct: 2.0          # -2.0%: Reduce position sizes
  soft_limit_pct: 2.5       # -2.5%: Block new entries
  medium_limit_pct: 3.0     # -3.0%: Partial liquidation
  hard_limit_pct: 4.0       # -4.0%: Full liquidation + halt (funded challenge buffer)
  partial_liquidation_pct: 50  # Close 50% at medium tier (ODE-90)
  warning_size_multiplier: 0.5
  tighten_stops_at_soft: true
  liquidation_timeout_sec: 30
  use_market_orders: true
losing_streak_guard:
  enabled: true
  losing_threshold_r: 0.5      # Trade counts as loss if pnl <= -0.5R
  lookback_days: 3             # Rolling window
  min_losing_trades: 2         # Trigger after this many losers
  throttle_multiplier: 0.5     # Reduce size to 50%
entry_gate:
  confidence_threshold: 80
  max_trades_per_symbol_per_day: 2
  min_time_between_trades_minutes: 120
  daily_loss_guard:
    enabled: true
    max_losing_trades_per_day: 2
promotion_requirements:
  min_profit_factor: 1.2
  min_win_rate: 0.45
  min_trade_count: 30
  min_weeks_observed: 2
exit_manager:
  tier_0_hard_stop: -0.05
  tier_1_profit_floor: 0.0125  # 1.25% - actual value used (key mismatch means default is used)
  tier_2_atr_trailing: 0.02
  tier_3_partial_take: 0.03
  max_hold_hours: 48
  eod_close: false
trailing_stop:
  enabled: true
  activation_pct: 0.15
  trail_pct: 0.15
  move_to_breakeven: true
data_quality:
  stale_threshold_minutes: 60
  min_bars_required: 200
  volume_filter_enabled: true
strategies:
  momentum:
    enabled: false  # Disabled: catches end of moves, only $2 avg P&L
    weight: 0.0
  mean_reversion:
    enabled: true
    weight: 0.25
  breakout:
    enabled: true
    weight: 0.4  # Increased: this is the main edge
  ml_ensemble:
    enabled: false
    weight: 0.0
  vwap:
    enabled: false
    weight: 0.0
logging:
  database: logs/trades_1hour.db
  detailed_signals: false
  track_mfe_mae: true
capital_allocation:
  percentage_of_total: 80
  reserve_cash_pct: 10
parity_capture:
  enabled: false
  output_path: logs/parity_capture_1hour.jsonl
  include_indicators: true
  include_bar_data: true
  flush_interval: 1
volatility_scanner:
  enabled: true
  top_n: 10
  min_price: 5
  min_volume: 500000
  min_market_cap: 300000000
  refresh_time: 09:00
  weights:
    atr_pct: 0.5
    daily_range_pct: 0.3
    volume_ratio: 0.2
debug:
  log_all_signals: false       # Log every signal (not just executed ones)
  log_signal_components: false # Log indicator values that made up the signal
